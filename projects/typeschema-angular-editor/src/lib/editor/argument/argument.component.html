
@for (row of result(); track row.name) {
  <div class="row mb-3">
    <div class="col-3">
      <input type="text" [id]="'name_' + row.name" [name]="'name_' + row.name" [ngModel]="row.name" (ngModelChange)="setName($index, $event)" class="form-control">
    </div>
    <div class="col-3">
      <select [id]="'in_' + row.in" [name]="'in_' + row.in" [ngModel]="row.in" (ngModelChange)="setIn($index, $event)" class="form-select">
        @for (in_ of ins; track in_.key) {
          <option [ngValue]="in_.key">{{in_.value}}</option>
        }
      </select>
    </div>
    <div class="col-6">
      <div class="input-group">
        <select [id]="'type_' + row.name" [name]="'type_' + row.name" [ngModel]="row.type" (ngModelChange)="setType($index, $event)" class="form-select">
          <optgroup label="scalar">
            <option ngValue="string">String</option>
            <option ngValue="integer">Integer</option>
            <option ngValue="number">Number</option>
            <option ngValue="boolean">Boolean</option>
          </optgroup>
          @if (row.in === 'query') {
            <optgroup label="self">
              @for (refType of specification().types; track $index) {
                <option [ngValue]="refType.name">{{ refType.name }}</option>
              }
            </optgroup>
            @for (include of specification().imports; track include.alias) {
              <optgroup label="{{ include.alias }}">
                @for (parentType of include.types; track $index) {
                  @if (parentType.name != row.name) {
                    <option [ngValue]="include.alias + ':' + parentType.name">{{ parentType.name }}</option>
                  }
                }
              </optgroup>
            }
          }
        </select>
        <button class="btn btn-outline-secondary" (click)="remove(row.name);changeValue()"><i class="bi bi-x"></i></button>
      </div>
    </div>
  </div>
}

<div class="row">
  <div class="col-3">
    <input type="text" id="newArgumentName" name="newArgumentName" [ngModel]="newName()" (ngModelChange)="newName.set($event)" class="form-control">
  </div>
  <div class="col-3">
    <select id="newArgumentIn" name="newArgumentIn" [ngModel]="newIn()" (ngModelChange)="newIn.set($event)" class="form-select">
      @for (in_ of ins; track in_.key) {
        <option [ngValue]="in_.key">{{in_.value}}</option>
      }
    </select>
  </div>
  <div class="col-6">
    <div class="input-group">
      <select id="newArgumentType" name="newArgumentType" [ngModel]="newType()" (ngModelChange)="newType.set($event)" class="form-select">
        <optgroup label="scalar">
          <option ngValue="string">String</option>
          <option ngValue="integer">Integer</option>
          <option ngValue="number">Number</option>
          <option ngValue="boolean">Boolean</option>
        </optgroup>
      </select>
      <button class="btn btn-outline-secondary" (click)="add();changeValue()"><i class="bi bi-plus"></i></button>
    </div>
  </div>
</div>
